# 서울아산병원 협업평가 시스템 인계서

## 📋 개요

이 문서는 서울아산병원 협업평가 대시보드 시스템의 완전한 인계서입니다. Git, Claude Code CLI, Cursor IDE에 대한 사전 지식이 없는 담당자도 시스템을 이해하고 운영할 수 있도록 작성되었습니다.

---

## 🎯 시스템 목적

서울아산병원의 부서 간 협업 평가 설문 데이터를 수집, 분석하여 대화형 웹 대시보드로 시각화하는 시스템입니다.

**주요 기능:**
- 엑셀 설문 데이터 자동 처리
- 부서명 표준화 및 부문 매핑
- 대화형 HTML 대시보드 생성
- 부서별 상세 보고서 생성

---

## 🛠️ 개발 도구 소개

### Git (버전 관리 시스템)

**Git이란?**
- 코드의 변경 사항을 추적하고 관리하는 도구
- 여러 버전의 파일을 저장하여 언제든 이전 상태로 되돌릴 수 있음
- 협업 시 여러 사람의 작업을 병합할 수 있음

**주요 개념:**
- **Repository (저장소)**: 프로젝트 파일들과 변경 이력을 저장하는 공간
- **Commit (커밋)**: 변경된 내용을 저장소에 기록하는 행위
- **Branch (브랜치)**: 독립적인 작업 공간 (메인 코드에 영향 없이 실험 가능)
- **Push**: 로컬 변경사항을 원격 저장소에 업로드
- **Pull**: 원격 저장소의 최신 변경사항을 다운로드

**기본 명령어:**
```bash
git status          # 현재 상태 확인
git add .           # 모든 변경사항을 스테이징
git commit -m "메시지"  # 변경사항 저장
git push            # 원격에 업로드
git pull            # 원격에서 다운로드
```

### Claude Code CLI

**Claude Code CLI란?**
- Anthropic에서 제공하는 AI 코딩 도구
- 자연어로 명령을 내리면 코드를 작성, 수정, 분석해줌
- 터미널에서 직접 실행 가능

**주요 기능:**
- 코드 작성 및 수정
- 파일 검색 및 분석
- 버그 수정
- 코드 설명

**사용법:**
```bash
claude-code         # Claude Code 실행
```

**유용한 명령어 예시:**
- "파일에서 특정 함수 찾아줘"
- "이 오류를 수정해줘"
- "새로운 기능을 추가해줘"
- "코드를 최적화해줘"

### Cursor IDE

**Cursor IDE란?**
- AI가 통합된 코드 편집기
- VS Code 기반이지만 AI 기능이 강화됨
- 코드 작성, 편집, 디버깅을 AI가 도움

**주요 기능:**
- AI 코드 자동완성
- 자연어로 코드 수정 요청
- 코드 설명 및 문서화
- 오류 자동 감지 및 수정

**사용법:**
1. Cursor 실행
2. 프로젝트 폴더 열기
3. `Ctrl+K` (Windows) 또는 `Cmd+K` (Mac)으로 AI 채팅 실행
4. 자연어로 요청 입력

---

## 📁 시스템 파일 구조

```
team-review-project/
├── rawdata/                          # 원본 데이터 폴더
│   ├── 설문조사진행현황[VCRCRIC120S]_*.xlsx  # 설문 데이터
│   ├── 부서_부문_매핑.xlsx                   # 부서-부문 매핑
│   └── 부서명_표준화_매핑.xlsx               # 부서명 표준화
├── 1. data_processor.py              # 데이터 전처리 스크립트
├── 2. text_processor.py              # AI 텍스트 분석 스크립트
├── 3. build_dashboard_html.py        # 메인 대시보드 생성
├── 4. team_reports.py               # 부서별 보고서 생성
└── 서울아산병원 협업평가 대시보드.html    # 생성된 대시보드
```

---

## 🔧 파일별 상세 설명

### 1. data_processor.py

**목적**: 원본 설문 데이터를 분석 가능한 형태로 전처리

**주요 기능:**
- 엑셀 파일 자동 인식 및 로드
- 부서명 표준화 적용
- 부서-부문 매핑
- 점수 계산 및 정규화
- 결측값 및 극단값 처리

**중요 설정:**
```python
# 파일 경로
BASE_PATH = "./rawdata"              # 데이터 폴더

# 제외 설정 (data_processor에서는 제외하지 않음)
# 제외는 build_dashboard_html.py와 team_reports.py에서 처리
```

**실행 방법:**
```bash
python "1. data_processor.py"
```

**출력**: `rawdata/1. data_processor_결과_YYYYMMDD_HHMMSS.xlsx`

### 2. text_processor.py

**목적**: AI를 이용한 텍스트 감정 분석 및 정제

**주요 기능:**
- Google Vertex AI (Gemini 2.5 Pro) 사용
- 협업 후기 텍스트 감정 분석
- 부정적 피드백 비식별 처리
- 텍스트 정제 및 키워드 추출
- 의료 맥락 분석
- 배치 처리 및 체크포인트 지원

**중요 설정:**
```python
# Google Cloud 설정
project_id = "mindmap-462708"          # Google Cloud 프로젝트 ID
max_rows = 200                         # 테스트용 처리 행 수

# 분석 컬럼
column_name = "협업 후기"              # 분석할 텍스트 컬럼

# 파일 경로 (자동 감지)
INPUT_DATA_FILE = "rawdata/1. data_processor_결과_*.xlsx"  # 입력 파일
```

**실행 방법:**
```bash
python "2. text_processor.py"
```

**출력**: `rawdata/2. text_processor_결과_YYYYMMDD_HHMMSS.xlsx`

**AI 분석 결과 컬럼:**
- `정제된_텍스트`: AI가 정제한 텍스트
- `비식별_처리`: 개인정보 제거 여부
- `감정_분류`: 긍정/부정/중립
- `감정_강도_점수`: 1-10점 척도
- `핵심_키워드`: 주요 키워드 리스트
- `의료_맥락`: 의료 업무 맥락 분류
- `신뢰도_점수`: AI 분석 신뢰도

### 3. build_dashboard_html.py

**목적**: 메인 대시보드 HTML 파일 생성

**주요 기능:**
- 대화형 차트 생성 (Plotly 사용)
- 필터링 및 검색 기능
- 협업 관계 분석
- 텍스트 분석 결과 표시

**중요 설정:**
```python
# 제외 설정
EXCLUDE_DEPARTMENTS = ['미분류', '윤리경영실']  # 부문 기준 제외
EXCLUDE_TEAMS = ['내분비외과']                  # 부서 기준 제외

# 파일 경로
INPUT_DATA_FILE = get_latest_text_processor_file()  # 자동 감지
OUTPUT_HTML_FILE = "서울아산병원 협업평가 대시보드.html"
```

**실행 방법:**
```bash
python "3. build_dashboard_html.py"
```

**출력**: `서울아산병원 협업평가 대시보드.html`

### 4. team_reports.py

**목적**: 부서별 상세 보고서 생성

**주요 기능:**
- 각 부서/부문별 개별 HTML 보고서 생성
- 부서 특화 분석 결과
- 개별 부서 성과 지표

**중요 설정:**
```python
# 제외 설정 (build_dashboard_html.py와 동일)
EXCLUDE_DEPARTMENTS = ['미분류', '윤리경영실']
EXCLUDE_TEAMS = ['내분비외과']
```

**실행 방법:**
```bash
python "4. team_reports.py"
```

**출력**: 각 부서별 HTML 파일들

---

## ⚙️ 데이터 처리 순서

### 1단계: 데이터 전처리 (data_processor.py)

1. **표준화 매핑 로드**: `부서명_표준화_매핑.xlsx`
2. **부문 매핑 로드**: `부서_부문_매핑.xlsx` (표준화 적용)
3. **설문 데이터 로드**: `설문조사진행현황[VCRCRIC120S]_*.xlsx`
4. **부서명 표준화 적용**
5. **부문 매핑 적용**
6. **점수 계산 및 정규화**

### 2단계: AI 텍스트 분석 (text_processor.py)

1. **전처리된 데이터 로드**: `1. data_processor_결과_*.xlsx`
2. **협업 후기 텍스트 추출**
3. **Google Vertex AI로 감정 분석**
4. **텍스트 정제 및 비식별 처리**
5. **키워드 추출 및 의료 맥락 분석**
6. **품질 검증 및 재분석**

### 3단계: 대시보드 생성 (build_dashboard_html.py)

1. **AI 분석된 데이터 로드**: `2. text_processor_결과_*.xlsx`
2. **제외 부서/부문 필터링**
3. **차트 데이터 생성**
4. **HTML 템플릿에 데이터 삽입**
5. **대화형 기능 구현**

### 4단계: 부서별 보고서 생성 (team_reports.py)

1. **전처리된 데이터 로드**
2. **부서별 데이터 분할**
3. **각 부서별 보고서 생성**

---

## 🚀 시스템 운영 가이드

### 일상적인 작업 흐름

1. **새 설문 데이터 추가시:**
   ```bash
   # 1. rawdata 폴더에 새 엑셀 파일 추가
   # 2. 데이터 전처리 실행
   python "1. data_processor.py"
   
   # 3. AI 텍스트 분석 실행
   python "2. text_processor.py"
   
   # 4. 대시보드 생성
   python "3. build_dashboard_html.py"
   
   # 5. 부서별 보고서 생성 (필요시)
   python "4. team_reports.py"
   ```

2. **Git으로 변경사항 저장:**
   ```bash
   git add .
   git commit -m "새 설문 데이터 추가 및 대시보드 업데이트"
   git push
   ```

### 문제 해결 시 Claude Code 활용

1. **오류 발생시:**
   ```bash
   claude-code
   ```
   Then say: "이 오류를 수정해줘" + 오류 메시지

2. **새 기능 추가시:**
   "새로운 차트를 추가하고 싶어. 부서별 월별 트렌드 차트를 만들어줘"

3. **코드 이해가 필요할 때:**
   "이 함수가 무엇을 하는지 설명해줘"

---

## 📊 데이터 구조 이해

### 설문 데이터 구조

**핵심 컬럼:**
- `설문시행연도`: 설문 실시 연도
- `평가_부서명`: 평가를 하는 부서
- `피평가대상 부서명`: 평가를 받는 부서
- `평가_Unit명`, `피평가대상 UNIT명`: 세부 조직 단위

**점수 컬럼:**
- `존중배려`: 타 부서 입장 존중 및 배려
- `정보공유`: 업무 정보 공유 수준
- `명확처리`: 업무 담당자 및 처리 일관성
- `태도개선`: 협업 태도 개선 노력
- `전반만족`: 전반적인 협업 만족도
- `종합점수`: 위 5개 항목의 평균

### 매핑 파일 구조

**부서명_표준화_매핑.xlsx:**
- `변경전_부서명`: 원본 부서명
- `표준_부서명`: 표준화된 부서명

**부서_부문_매핑.xlsx:**
- `부서명`: 표준화된 부서명
- `소속UNIT`: Unit명 (있는 경우)
- `부문`: 해당하는 부문명

---

## 🔍 주요 기능 설명

### 1. 부서명 표준화

**목적**: 동일한 부서의 다양한 표기를 통일
**예시**: "심장내과", "심장내과센터" → "심장내과"

### 2. 부문 매핑

**목적**: 부서를 더 큰 조직 단위인 부문으로 그룹화
**예시**: "심장내과" → "내과계열"

### 3. 제외 기능

**부문 제외**: `EXCLUDE_DEPARTMENTS = ['미분류', '윤리경영실']`
**부서 제외**: `EXCLUDE_TEAMS = ['내분비외과']`

### 4. 통계적 주의사항

응답건수가 30건 미만인 경우 통계적 해석에 주의가 필요합니다.

---

## 🛠️ 커스터마이징 방법

### 제외 부서/부문 수정

**파일**: `3. build_dashboard_html.py`, `4. team_reports.py`

```python
# 부문 기준 제외 (90-91번째 줄)
EXCLUDE_DEPARTMENTS = ['미분류', '윤리경영실', '새부문명']

# 부서 기준 제외
EXCLUDE_TEAMS = ['내분비외과', '새부서명']
```

### 차트 색상 변경

**파일**: `3. build_dashboard_html.py`

색상 설정 부분을 찾아 수정:
```python
# 예시: 차트 색상 변경
colors = ['#4a69bd', '#6a89cc', '#f39c12', '#e74c3c']
```

### 새로운 분석 지표 추가

Claude Code CLI 사용:
```bash
claude-code
```
"새로운 분석 지표를 추가하고 싶어. 부서별 응답률 분석을 만들어줘"

---

## 🚨 문제 해결 가이드

### 자주 발생하는 문제들

1. **파일을 찾을 수 없음**
   - 파일 경로가 정확한지 확인
   - 파일명의 특수문자나 공백 확인

2. **데이터 매핑 오류**
   - 부서명_표준화_매핑.xlsx 확인
   - 부서_부문_매핑.xlsx 확인

3. **차트가 표시되지 않음**
   - 인터넷 연결 확인 (Plotly CDN 필요)
   - 브라우저 호환성 확인

### Claude Code로 문제 해결

**단계별 접근:**
1. 문제 상황 설명: "이런 오류가 발생해요"
2. 로그 확인 요청: "로그를 확인해서 문제를 찾아줘"
3. 해결책 요청: "이 문제를 해결해줘"
4. 검증 요청: "수정이 잘 되었는지 확인해줘"

---

## 📈 시스템 확장 방안

### 단기 개선 사항

1. **자동화 스케줄링**: 정기적인 데이터 업데이트
2. **알림 시스템**: 새 데이터 처리 완료시 알림
3. **백업 시스템**: 자동 백업 및 복구

### 장기 개선 사항

1. **웹 애플리케이션화**: 브라우저에서 직접 데이터 업로드
2. **실시간 대시보드**: 실시간 데이터 업데이트
3. **고급 분석**: 머신러닝 기반 예측 분석

### Claude Code 활용 개발

**새 기능 개발 요청 예시:**
- "엑셀 파일 드래그앤드롭 기능을 추가해줘"
- "모바일 친화적인 반응형 디자인으로 만들어줘"
- "데이터 내보내기 기능을 추가해줘"

---

## 🔐 보안 및 데이터 관리

### 중요 사항

1. **개인정보 보호**: 설문 응답자 개인 식별 불가
2. **데이터 백업**: 정기적인 백업 수행
3. **접근 권한**: 승인된 사용자만 시스템 접근

### Git 사용시 주의사항

```bash
# 민감한 파일은 .gitignore에 추가
echo "*.password" >> .gitignore
echo "config/secrets.py" >> .gitignore
```

---

## 📞 지원 및 연락처

### 기술 지원

1. **Claude Code 공식 문서**: https://docs.anthropic.com/en/docs/claude-code
2. **Git 학습 자료**: https://git-scm.com/doc
3. **Cursor IDE 가이드**: https://cursor.sh/docs

### 시스템 관련 문의

**Claude Code를 통한 즉시 지원:**
```bash
claude-code
```
"시스템 사용 중 문제가 있어요. 도와주세요."

**GitHub Issues (개발 관련):**
문제 발생시 GitHub 저장소의 Issues 탭에 문제 등록

---

## 📚 추가 학습 자료

### Git 기초

**필수 명령어:**
```bash
git clone [URL]     # 저장소 복제
git status          # 상태 확인
git add .           # 변경사항 스테이징
git commit -m "메시지"  # 커밋
git push            # 업로드
git pull            # 다운로드
```

### Python 기초

**주요 라이브러리:**
- `pandas`: 데이터 처리
- `plotly`: 차트 생성
- `pathlib`: 파일 경로 처리

### HTML/CSS 기초

**대시보드 커스터마이징을 위한 기본 지식:**
- HTML 구조 이해
- CSS 스타일링
- JavaScript 기본 문법

---

## ✅ 체크리스트

### 시스템 인수인계 완료 확인

- [ ] Git 기본 개념 이해
- [ ] Claude Code CLI 설치 및 실행 확인
- [ ] Cursor IDE 설치 및 사용법 숙지
- [ ] 각 Python 스크립트 실행 성공
- [ ] 대시보드 생성 및 표시 확인
- [ ] 데이터 추가 프로세스 실습
- [ ] Git으로 변경사항 저장 실습
- [ ] 문제 해결을 위한 Claude Code 활용 실습

### 정기 점검 사항

**월간 점검:**
- [ ] 새 설문 데이터 추가
- [ ] 대시보드 업데이트
- [ ] 백업 파일 확인
- [ ] 시스템 성능 점검

**분기별 점검:**
- [ ] 부서명 표준화 매핑 업데이트
- [ ] 부문 매핑 검토 및 업데이트
- [ ] 제외 설정 재검토
- [ ] 보안 점검

---

**문서 작성일**: 2025년 7월 21일  
**작성자**: Claude AI  
**버전**: 1.0  
**다음 업데이트 예정일**: 2025년 10월 21일