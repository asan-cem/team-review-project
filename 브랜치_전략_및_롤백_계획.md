# 🌿 대시보드 개발 브랜치 전략 및 롤백 계획

## 🎯 브랜치 전략 제안

### **현재 상태**
- **메인 브랜치**: `250626_a` (안정적인 분석 시스템 완성)
- **커밋**: `06a5954` (조직별 분석 시스템 설계 완료)

### **제안하는 브랜치 구조**
```
250626_a (현재 - 안정 버전)
    ↓
dashboard-dev (새로 생성 - 대시보드 개발용)
    ↓
dashboard-test (선택사항 - 실험용)
```

---

## 🚀 대시보드 개발 브랜치 생성 계획

### **1단계: 백업 태그 생성**
```bash
# 현재 안정 버전에 태그 생성 (롤백 지점)
git tag -a v1.0-stable -m "안정 버전: 조직별 분석 시스템 완성"
```

### **2단계: 대시보드 개발 브랜치 생성**
```bash
# 대시보드 개발용 브랜치 생성 및 이동
git checkout -b dashboard-dev

# 브랜치 설명 추가
git config branch.dashboard-dev.description "대시보드 및 PDF 리포트 시스템 개발"
```

### **3단계: 실험용 브랜치 생성 (선택사항)**
```bash
# 위험한 실험은 별도 브랜치에서
git checkout -b dashboard-test
```

---

## 🛡️ 롤백 전략 (4가지 방법)

### **🎯 방법 1: 태그로 즉시 복원 (가장 안전)**
```bash
# 언제든 안정 버전으로 완전 복원
git checkout v1.0-stable
git checkout -b dashboard-dev-v2  # 새로운 개발 브랜치
```
**장점**: 완전한 복원, 위험 없음  
**단점**: 개발 진행사항 완전 손실

### **🔄 방법 2: 개발 브랜치 리셋**
```bash
# 개발 브랜치를 안정 버전으로 되돌리기
git checkout dashboard-dev
git reset --hard v1.0-stable
```
**장점**: 빠른 복원  
**단점**: 커밋 히스토리 손실

### **↩️ 방법 3: 선택적 되돌리기**
```bash
# 특정 커밋만 되돌리기 (문제가 된 변경사항만)
git revert <문제_커밋_해시>
```
**장점**: 히스토리 보존, 선택적 롤백  
**단점**: 복잡한 충돌 가능성

### **🔀 방법 4: 체리픽으로 좋은 부분만 가져오기**
```bash
# 개발 중 좋은 커밋만 새 브랜치로 가져오기
git checkout v1.0-stable
git checkout -b dashboard-dev-clean
git cherry-pick <좋은_커밋_해시>
```
**장점**: 좋은 부분만 선별적 보존  
**단점**: 수동 작업 필요

---

## 🧪 대시보드 개발 테스트 전략

### **단계별 개발 접근법**
```
1️⃣ 최소 기능 대시보드 (MVP)
   ├── 기본 데이터 로드
   ├── 간단한 차트 1개
   └── 테스트 → 성공 시 다음 단계

2️⃣ 핵심 기능 추가
   ├── 조직별 필터링
   ├── 인터랙티브 차트
   └── 테스트 → 성공 시 다음 단계

3️⃣ 고급 기능 완성
   ├── 권한 관리
   ├── PDF 리포트
   └── 최종 테스트
```

### **실패 감지 기준**
- ❌ 기존 main.py 동작 불가
- ❌ 데이터 처리 오류 발생
- ❌ 메모리 사용량 급증
- ❌ 설치 패키지 충돌

---

## 📦 환경 분리 전략

### **패키지 관리**
```bash
# 대시보드용 별도 requirements 파일 생성
cp requirements.txt requirements-dashboard.txt

# 대시보드 패키지 추가 시
echo "streamlit==1.28.1" >> requirements-dashboard.txt
echo "plotly==5.17.0" >> requirements-dashboard.txt
```

### **가상환경 백업**
```bash
# 현재 가상환경 백업
cp -r venv venv-backup

# 문제 발생 시 복원
rm -rf venv
mv venv-backup venv
```

---

## 🎛️ 대시보드 개발 준비사항

### **필요한 패키지 (예상)**
```python
# 대시보드 핵심
streamlit >= 1.28.0
plotly >= 5.17.0
pandas >= 1.5.0

# PDF 생성
reportlab >= 4.0.0
matplotlib >= 3.6.0

# 웹 프레임워크 (대안)
dash >= 2.14.0  # Streamlit 대신 사용 가능
fastapi >= 0.104.0  # API 백엔드용
```

### **개발 환경 설정**
```bash
# 개발 모드 플래그 추가
export DASHBOARD_DEV_MODE=true

# 테스트 데이터 경로 분리
export TEST_DATA_PATH="test_data/"
```

---

## 🔍 롤백 결정 기준

### **즉시 롤백해야 하는 경우**
- 🚨 기존 main.py가 작동하지 않음
- 🚨 데이터가 손상되거나 처리 불가
- 🚨 시스템 리소스 과다 사용
- 🚨 패키지 의존성 충돌로 환경 파괴

### **일시 중단 후 재시도하는 경우**
- ⚠️ 대시보드 UI 문제 (기능은 정상)
- ⚠️ 차트 렌더링 오류
- ⚠️ 성능이 예상보다 느림
- ⚠️ 일부 기능만 동작 안 함

### **계속 개발하는 경우**
- ✅ 기존 기능 모두 정상 동작
- ✅ 대시보드 기본 구조 성공
- ✅ 추가 기능만 개발 필요

---

## 🎯 권장 실행 계획

### **바로 시작 가능한 명령어**
```bash
# 1. 현재 상태 백업
git tag -a v1.0-stable -m "안정 버전: 조직별 분석 시스템 완성"

# 2. 대시보드 개발 브랜치 생성
git checkout -b dashboard-dev

# 3. 개발 환경 준비
cp requirements.txt requirements-dashboard.txt
cp -r venv venv-backup

# 4. 개발 시작
echo "대시보드 개발 시작!"
```

### **문제 발생 시 즉시 복원**
```bash
# 안전한 버전으로 즉시 복귀
git checkout v1.0-stable
git checkout -b dashboard-dev-v2

# 또는 환경까지 완전 복원
rm -rf venv
mv venv-backup venv
source venv/bin/activate
```

---

## 💡 추가 권장사항

### **개발 중 주의사항**
1. **자주 커밋**: 작은 기능 단위로 자주 커밋
2. **테스트 우선**: 새 기능 추가 전 기존 기능 테스트
3. **문서화**: 변경사항과 문제점 기록
4. **백업 확인**: 롤백 방법 미리 테스트

### **성공 시 다음 단계**
1. 대시보드 완성 후 `dashboard-dev` → `250626_a` 머지
2. 새로운 stable 태그 생성
3. 다음 기능 (PDF 리포트) 개발 브랜치 생성

이 계획으로 안전하게 대시보드 개발을 진행하면서도 언제든 안정 버전으로 돌아갈 수 있습니다!